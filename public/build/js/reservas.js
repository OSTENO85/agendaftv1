!function(){!async function(){try{const t="/api/menu",n=await fetch(t),o=await n.json();e=o.menu,a()}catch(e){console.log(e)}}();let e=[],t=[];document.querySelector("#agregar-menu").addEventListener("click",(function(){!function(){const e=document.createElement("DIV");e.classList.add("modal"),e.innerHTML='\n    <form class="formulario nuevo-menu">\n    <legend>Añade una nueva comida</legend>\n    <div class="campo">\n            <label>Nombre</label>\n         <input \n            type="text"\n            name="menu"\n            placeholder="Nombre de la comida o bebida"\n            id="menu" \n        />\n    </div>\n\n\n    <div class="campo">\n    <label>Receta</label>\n    <textarea name="receta" rows="10" cols="40" id="receta"></textarea>\n    </div>\n\n    <div class="campo">\n    <label for="tipo_comida">Tipo de comida:</label>\n    <select id="tipo_comida" name="tipo_comida">\n      <option value="cena">Cena/Almuerzo</option>\n      <option value="desayuno">Desayuno</option>\n      <option value="bebida">Bebida</option>\n      <option value="postre">Postre</option>\n    </select>\n  </div>\n\n\n    <div class="opciones">\n    <input type="submit" class="submit-nuevo-menu" value="Añadir Comida" />\n        <button type="button" class="cerrar-modal">Cerrar</button>\n    </div>\n\n\n</form> \n',setTimeout(()=>{document.querySelector(".formulario").classList.add("animar")},0),e.addEventListener("click",(function(t){if(t.preventDefault(),t.target.classList.contains("cerrar-modal")){document.querySelector(".formulario").classList.add("cerrar"),setTimeout(()=>{e.remove()},500)}t.target.classList.contains("submit-nuevo-menu")&&function(){const e=document.querySelector("#menu").value.trim(),t=document.querySelector("#receta").value.trim(),n=document.querySelector("#tipo_comida").value;if(""===e)return void i("se debe incluir un nombre para la comida o bebida","error",document.querySelector(".formulario legend"));c(e,t,n)}()})),document.querySelector(".dashboard").appendChild(e)}()}));document.querySelectorAll('#filtros input[type="radio').forEach(e=>{e.addEventListener("input",o)});const n={"":()=>e,cena:e=>"cena"===e.tipo_comida,desayuno:e=>"desayuno"===e.tipo_comida,postre:e=>"postre"===e.tipo_comida,bebida:e=>"bebida"===e.tipo_comida};function o(o){const i=o.target.value;t=e.filter(n[i]),console.log(t),a()}function a(){!function(){const e=document.querySelector("#listado-menu");for(;e.firstChild;)e.removeChild(e.firstChild)}();const n=t.length?t:e;if(0===n.length){const e=document.querySelector("#listado-menu"),t=document.createElement("LI");return t.textContent="no hay datos",t.classList.add("no-menu"),void e.appendChild(t)}n.forEach(t=>{const n=document.createElement("LI");n.dataset.menuId=t.id,n.classList.add("contenedor-menu");const o=document.createElement("P");o.textContent=t.nombre_comida,o.classList.add("nombre-comida");const a=document.createElement("P");a.textContent=t.receta;const c=document.createElement("P");c.textContent=t.tipo_comida,c.classList.add("tipo-comida");const d=document.createElement("DIV");d.classList.add("opciones");const r=document.createElement("BUTTON");r.classList.add("eliminar-menu"),r.dataset.idMenu=e.id,r.textContent="X",r.ondblclick=function(){!function(e){Swal.fire({title:"Quieres eliminar el registro?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&async function(e){const{id:t,nombre_comida:n,receta:o,tipo_comida:a}=e,c=new FormData;c.append("id",t),c.append("nombre_comida",n),c.append("receta",o),c.append("tipo_comida",a);try{const e="api/menu/eliminar",t=await fetch(e,{method:"POST",body:c}),n=await t.json();n.resultado&&(i(n.mensaje,n.tipo,document.querySelector(".contenedor-nuevo-menu")),window.location.reload())}catch(e){}}(e)})}({...t})},d.appendChild(r),n.appendChild(o),n.appendChild(a),n.appendChild(c),n.appendChild(d);document.querySelector("#listado-menu").appendChild(n)})}function i(e,t,n){const o=document.querySelector(".alerta");o&&o.remove();const a=document.createElement("DIV");a.classList.add("alerta",t),a.textContent=e,n.parentElement.insertBefore(a,n.nextElementSibling),setTimeout(()=>{a.remove()},4e3)}async function c(t,n,o){const c=new FormData;c.append("nombre_comida",t),c.append("receta",n),c.append("tipo_comida",o);try{const d="/api/menu",r=await fetch(d,{method:"POST",body:c}),l=await r.json();if(console.log(l),i(l.mensaje,l.tipo,document.querySelector(".formulario legend")),"exito"===l.tipo){const i=document.querySelector(".modal");setTimeout(()=>{i.remove()},3e3);const c={id:String(l.id),nombre_comida:t,receta:n,tipo_comida:o};e=[...e,c],a()}}catch(e){console.log(e)}}}();